\input{../../preamble}
% BUG REPORT TEMPLATE -----------------------------------
%% \noindent\begin{tabularx}{\textwidth}{rY}
%%   \toprule
%%   File & \\
%%   Line & \\
%%   Description & \\
%%   Number of Configurations & \\
%%   \midrule
%%   \multicolumn{2}{c}{Code Sample} \\
%% \end{tabularx}
%% \noindent\lstinputlisting[linerange=, firstnumber=]{code/}
%% \noindent\begin{tabularx}{\textwidth}{rY}
%%   \midrule
%%   Status & \\
%%   Remarks & \\
%%   \bottomrule
%% \end{tabularx}
% -------------------------------------------------------

\title{Toybox Bug Analysis -- infer}
\author{Austin Mordahl}
\begin{document}
\maketitle

\section{Introduction}
\noindent These bugs were generated by Infer v0.15.0 and Toybox 0.7.5. Bug reports are classified into the following categories:

\input{../../bug_classifications}

\pagebreak
\section{True Reports}

\section{Technically True Reports}

\section{False Reports}

\noindent\begin{tabularx}{\textwidth}{rY}
  \toprule
  File & grep.c\\
  Line & 184\\
  Description & The value read from \texttt{matches.rm\_so} was never initialized.\\
  Number of Configurations & 507\\
  \midrule
  \multicolumn{2}{c}{Code Sample} \\
\end{tabularx}
\noindent\lstinputlisting[linerange=178-190, firstnumber=178]{code/grep.c}
\noindent\begin{tabularx}{\textwidth}{rY}
  \midrule
  Status & False\\
  Remarks & Were \texttt{matches.rm\_so} a singular variable, infer would be correct, becuase the initialization of \texttt{matches.rm\_so} would be out of scope. However, \texttt{matches} is a struct which is in scope. Additionally, the else if clause checks whether \texttt{matches.rm\_so} exists; line 184 will not be reached if \texttt{matches.rm\_so} is not initialized.\\
  \bottomrule
\end{tabularx}

\pagebreak

\noindent\begin{tabularx}{\textwidth}{rY}
  \toprule
  File & xwrap.c\\
  Line & 389\\
  Description & resource acquired by call to \texttt{xopen\_stdio()} at line 389, column 19 is not released after line 389, column 3. \\
  Number of Configurations & 986\\
  \midrule
  \multicolumn{2}{c}{Code Sample} \\
\end{tabularx}
\noindent\lstinputlisting[linerange=330-342, firstnumber=330]{code/xwrap.c}
\noindent\begin{tabularx}{\textwidth}{rY}
  \midrule
  Status & \\
  Remarks & \texttt{xopen\_stdio()} automatically closes a file unless the \texttt{O\_CLOEXEC} flag is passed to it (behaves opposite other functions which open files). There are two calls to \texttt{xopen\_stdio()} which do not pass \texttt{O\_CLOEXEC}. The first is in \texttt{oneit.c}, line 99. Here, the file descriptors are kept open on purpose, redirecting \texttt{stdin}, \texttt{stdout}, and \texttt{stderr}. The same pattern is used in the second occurrence. in \texttt{getty.c}.\\
  \bottomrule
\end{tabularx}

\end{document}

